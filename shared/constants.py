# Constants - 全局常量定义
"""
全局常量定义

本模块集中管理项目中使用的各类常量，包括：
- 熔断机制阈值
- 循环控制参数
- 超时配置
- 文件路径模板
"""

# ============================================================
# 错误修复熔断机制
# ============================================================

MAX_CONSECUTIVE_FIX_ATTEMPTS = 3
"""
连续修复尝试最大次数

当连续修复失败次数达到此阈值时，触发熔断机制：
- 禁用"修复错误"按钮
- 高亮"修改目标"按钮
- 提示用户重新评估设计目标或停止设计

可通过配置文件覆盖此值
"""

# ============================================================
# Agentic Loop 控制参数
# ============================================================

LOOP_MAX_ITERATIONS = 15
"""Agentic Loop 最大循环次数（防止无限循环）"""

LOOP_SOFT_WARNING_AT = 10
"""第 N 次迭代时提醒 LLM 尽快完成"""

LOOP_MAX_TOOL_CALLS_PER_TURN = 5
"""单轮最大工具调用数"""

LOOP_TIMEOUT_SECONDS = 300
"""Agentic Loop 整体超时时间（秒）"""

# ============================================================
# 工作流控制参数
# ============================================================

MAX_DESIGN_ITERATIONS = 50
"""设计迭代最大次数"""

MAX_STAGNATION_COUNT = 5
"""优化停滞最大次数（连续无改善）"""

# ============================================================
# 快照管理
# ============================================================

MAX_SNAPSHOTS_TO_KEEP = 10
"""保留的最大快照数量"""

SNAPSHOT_CLEANUP_THRESHOLD = 15
"""触发快照清理的阈值"""

# ============================================================
# 模块导出
# ============================================================

__all__ = [
    # 熔断机制
    "MAX_CONSECUTIVE_FIX_ATTEMPTS",
    # Agentic Loop
    "LOOP_MAX_ITERATIONS",
    "LOOP_SOFT_WARNING_AT",
    "LOOP_MAX_TOOL_CALLS_PER_TURN",
    "LOOP_TIMEOUT_SECONDS",
    # 工作流控制
    "MAX_DESIGN_ITERATIONS",
    "MAX_STAGNATION_COUNT",
    # 快照管理
    "MAX_SNAPSHOTS_TO_KEEP",
    "SNAPSHOT_CLEANUP_THRESHOLD",
]
